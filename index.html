<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Zootopia Premium</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
</head>
<body>

    <div id="splash-screen">
        <video id="splash-video" src="assets/splash_video.mp4" muted playsinline autoplay></video>
    </div>

    <div class="app-container" style="visibility: hidden;">
        
        <header class="main-header">
            <div class="user-profile">
                <img src="assets/avatar-placeholder.png" class="avatar">
                <span id="user-name">Player</span>
            </div>
            <div id="ton-connect-btn"></div> 
        </header>

        <div class="content-wrapper">

            <div id="page-main" class="page-content">
                <section class="balance-section">
                    <h1 id="balance">0</h1>
                    <div class="zoo-status">
                        <img src="assets/coin-logo.png" class="main-coin-icon" alt="ZOO coin">
                        <span id="zoo-balance">0.0000 $ZOO</span>
                    </div>
                </section>
                <main class="game-area">
                    <div class="character-card" id="tap-zone">
                        <img src="assets/main-dog.png" class="dog-base" id="dog-img" alt="Main Character">
                    </div>
                </main>
                <div class="energy-footer">
                    <div class="energy-info"><span>⚡ <span id="current-energy">1000</span>/1000</span></div>
                    <div class="progress-container"><div class="progress-fill" id="energy-bar"></div></div>
                </div>
            </div>

            <div id="page-mine" class="page-content" style="display: none;">
                 <div class="mine-container">
                    <div class="mine-header"><h2><i class="fas fa-pickaxe"></i> Костяная шахта</h2><p>Шахта пассивно добывает кости, пока вы отдыхаете.</p></div>
                    <div class="mine-stats-card">
                        <div><span>Уровень</span><strong id="mining-level">1</strong></div>
                        <div><span>В час</span><strong id="mining-rate">10</strong></div>
                    </div>
                    <div class="mine-storage-card">
                        <h3>Хранилище</h3>
                        <div class="progress-container"><div class="progress-fill" id="mining-storage-fill"></div></div>
                        <span id="mining-storage-value">0 / 100</span>
                        <button class="btn-main" onclick="MiningManager.collect()">Собрать</button>
                    </div>
                    <div class="mine-upgrade-card">
                        <h3>Улучшение</h3>
                        <p>Стоимость: <strong id="upgrade-cost">500</strong> костей</p>
                        <button id="btn-upgrade-mine" class="btn-secondary" onclick="MiningManager.upgrade()">Улучшить</button>
                    </div>
                </div>
            </div>
            
            <div id="page-swap" class="page-content" style="display: none;">
                <div class="swap-container">
                    <div class="swap-header"><h2><i class="fas fa-exchange-alt"></i> Обменник</h2><p>Конвертируйте ваши кости в токены $ZOO.</p></div>
                    <div class="swap-card">
                        <div class="swap-field"><label>Отдаете</label><input type="number" id="swap-input" placeholder="0"><span><i class="fas fa-bone"></i> КОСТИ</span></div>
                        <div class="user-balance">Ваш баланс: <span id="swap-user-bones">0</span></div>
                    </div>
                    <div class="swap-rate">Курс: 1000 <i class="fas fa-bone"></i> = 1 $ZOO</div>
                    <div class="swap-card">
                        <div class="swap-field"><label>Получаете</label><div id="swap-output" class="swap-output-value">0.00</div><span>$ZOO</span></div>
                    </div>
                    <button id="btn-perform-swap" class="btn-main">Обменять</button>
                </div>
            </div>

            <div id="page-tasks" class="page-content" style="display: none;">
                <div class="tasks-container"><div class="tasks-header"><h2><i class="fas fa-tasks"></i> Задания</h2><p>Выполняйте задания и получайте ценные награды.</p></div><div id="tasks-list" class="tasks-list-container"></div></div>
            </div>

        </div>

        <nav class="bottom-nav">
            <button class="nav-item active" onclick="showTab('main')"><i class="fas fa-paw"></i><span>Игра</span></button>
            <button class="nav-item" onclick="showTab('nft')"><i class="fas fa-star"></i><span>NFT</span></button>
            <button class="nav-item" onclick="showTab('swap')"><i class="fas fa-exchange-alt"></i><span>Обмен</span></button>
            <button class="nav-item" onclick="showTab('tasks')"><i class="fas fa-tasks"></i><span>Задания</span></button>
            <button class="nav-item" onclick="WalletManager.tonConnectUI.openModal()"><i class="fas fa-wallet"></i><span>Wallet</span></button>
        </nav>

        <div id="nft-sheet" class="bottom-sheet">
            <div class="sheet-handle"></div>
            <div class="sheet-content">
                <h2>Коллекция NFT</h2>
                <div class="nft-grid" id="inventory-grid"></div>
            </div>
        </div>

    </div>

    <script src="js/nft_manager.js"></script>
    <script src="js/mining.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/swap.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
